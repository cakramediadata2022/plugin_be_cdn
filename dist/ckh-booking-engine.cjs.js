"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={exports:{}};
/*!
 * 
 * litepicker.umd.js
 * Litepicker v2.0.12 (https://github.com/wakirin/Litepicker)
 * Package: litepicker (https://www.npmjs.com/package/litepicker)
 * License: MIT (https://github.com/wakirin/Litepicker/blob/master/LICENCE.md)
 * Copyright 2019-2021 Rinat G.
 *     
 * Hash: 504eef9c08cb42543660
 * 
 */window;const n=t(e.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o="en-US"),this.dateInstance="object"==typeof n&&null!==n?n.parse(e instanceof t?e.clone().toJSDate():e):"string"==typeof n?t.parseDateTime(e,n,o):e?t.parseDateTime(e):t.parseDateTime(new Date),this.lang=o}return t.parseDateTime=function(e,n,o){if(void 0===n&&(n="YYYY-MM-DD"),void 0===o&&(o="en-US"),!e)return new Date(NaN);if(e instanceof Date)return new Date(e);if(e instanceof t)return e.clone().toJSDate();if(/^-?\d{10,}$/.test(e))return t.getDateZeroTime(new Date(Number(e)));if("string"==typeof e){for(var i=[],s=null;null!=(s=t.regex.exec(n));)"\\"!==s[1]&&i.push(s);if(i.length){var r={year:null,month:null,shortMonth:null,longMonth:null,day:null,value:""};i[0].index>0&&(r.value+=".*?");for(var a=0,l=Object.entries(i);a<l.length;a++){var c=l[a],d=c[0],h=c[1],p=Number(d),u=t.formatPatterns(h[0],o),m=u.group,g=u.pattern;r[m]=p+1,r.value+=g,r.value+=".*?"}var f=new RegExp("^"+r.value+"$");if(f.test(e)){var y=f.exec(e),v=Number(y[r.year]),b=null;r.month?b=Number(y[r.month])-1:r.shortMonth?b=t.shortMonths(o).indexOf(y[r.shortMonth]):r.longMonth&&(b=t.longMonths(o).indexOf(y[r.longMonth]));var k=Number(y[r.day])||1;return new Date(v,b,k,0,0,0,0)}}}return t.getDateZeroTime(new Date(e))},t.convertArray=function(e,n){return e.map(function(e){return e instanceof Array?e.map(function(e){return new t(e,n)}):new t(e,n)})},t.getDateZeroTime=function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)},t.shortMonths=function(e){return t.MONTH_JS.map(function(t){return new Date(2019,t).toLocaleString(e,{month:"short"})})},t.longMonths=function(e){return t.MONTH_JS.map(function(t){return new Date(2019,t).toLocaleString(e,{month:"long"})})},t.formatPatterns=function(e,n){switch(e){case"YY":case"YYYY":return{group:"year",pattern:"(\\d{"+e.length+"})"};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:"("+t.shortMonths(n).join("|")+")"};case"MMMM":return{group:"longMonth",pattern:"("+t.longMonths(n).join("|")+")"};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"}}},t.prototype.toJSDate=function(){return this.dateInstance},t.prototype.toLocaleString=function(t,e){return this.dateInstance.toLocaleString(t,e)},t.prototype.toDateString=function(){return this.dateInstance.toDateString()},t.prototype.getSeconds=function(){return this.dateInstance.getSeconds()},t.prototype.getDay=function(){return this.dateInstance.getDay()},t.prototype.getTime=function(){return this.dateInstance.getTime()},t.prototype.getDate=function(){return this.dateInstance.getDate()},t.prototype.getMonth=function(){return this.dateInstance.getMonth()},t.prototype.getFullYear=function(){return this.dateInstance.getFullYear()},t.prototype.setMonth=function(t){return this.dateInstance.setMonth(t)},t.prototype.setHours=function(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this.dateInstance.setHours(t,e,n,o)},t.prototype.setSeconds=function(t){return this.dateInstance.setSeconds(t)},t.prototype.setDate=function(t){return this.dateInstance.setDate(t)},t.prototype.setFullYear=function(t){return this.dateInstance.setFullYear(t)},t.prototype.getWeek=function(t){var e=new Date(this.timestamp()),n=(this.getDay()+(7-t))%7;e.setDate(e.getDate()-n);var o=e.getTime();return e.setMonth(0,1),e.getDay()!==t&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((o-e.getTime())/6048e5)},t.prototype.clone=function(){return new t(this.toJSDate())},t.prototype.isBetween=function(t,e,n){switch(void 0===n&&(n="()"),n){default:case"()":return this.timestamp()>t.getTime()&&this.timestamp()<e.getTime();case"[)":return this.timestamp()>=t.getTime()&&this.timestamp()<e.getTime();case"(]":return this.timestamp()>t.getTime()&&this.timestamp()<=e.getTime();case"[]":return this.timestamp()>=t.getTime()&&this.timestamp()<=e.getTime()}},t.prototype.isBefore=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":return t.getTime()>this.getTime();case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return t.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")},t.prototype.isSameOrBefore=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":return t.getTime()>=this.getTime();case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")},t.prototype.isAfter=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":return this.getTime()>t.getTime();case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(t.getFullYear(),t.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>t.getFullYear()}throw new Error("isAfter: Invalid unit!")},t.prototype.isSameOrAfter=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":return this.getTime()>=t.getTime();case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")},t.prototype.isSame=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":return this.getTime()===t.getTime();case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")},t.prototype.add=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":this.setSeconds(this.getSeconds()+t);break;case"day":case"days":this.setDate(this.getDate()+t);break;case"month":case"months":this.setMonth(this.getMonth()+t)}return this},t.prototype.subtract=function(t,e){switch(void 0===e&&(e="seconds"),e){case"second":case"seconds":this.setSeconds(this.getSeconds()-t);break;case"day":case"days":this.setDate(this.getDate()-t);break;case"month":case"months":this.setMonth(this.getMonth()-t)}return this},t.prototype.diff=function(t,e){switch(void 0===e&&(e="seconds"),e){default:case"second":case"seconds":return this.getTime()-t.getTime();case"day":case"days":return Math.round((this.timestamp()-t.getTime())/864e5);case"month":case"months":}},t.prototype.format=function(e,n){if(void 0===n&&(n="en-US"),"object"==typeof e)return e.output(this.clone().toJSDate());for(var o="",i=[],s=null;null!=(s=t.regex.exec(e));)"\\"!==s[1]&&i.push(s);if(i.length){i[0].index>0&&(o+=e.substring(0,i[0].index));for(var r=0,a=Object.entries(i);r<a.length;r++){var l=a[r],c=l[0],d=l[1],h=Number(c);o+=this.formatTokens(d[0],n),i[h+1]&&(o+=e.substring(d.index+d[0].length,i[h+1].index)),h===i.length-1&&(o+=e.substring(d.index+d[0].length))}}return o.replace(/\\/g,"")},t.prototype.timestamp=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()},t.prototype.formatTokens=function(e,n){switch(e){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return("0"+(this.getMonth()+1)).slice(-2);case"MMM":return t.shortMonths(n)[this.getMonth()];case"MMMM":return t.longMonths(n)[this.getMonth()];case"D":return String(this.getDate());case"DD":return("0"+this.getDate()).slice(-2);default:return""}},t.regex=/(\\)?(Y{2,4}|M{1,4}|D{1,2}|d{1,4})/g,t.MONTH_JS=[0,1,2,3,4,5,6,7,8,9,10,11],t}();e.DateTime=o},function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,a=s.length;r<a;r++,i++)o[i]=s[r];return o};Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),a=n(0),l=n(3),c=n(2),d=function(t){function e(e){var n=t.call(this,e)||this;return n.preventClick=!1,n.bindEvents(),n}return i(e,t),e.prototype.scrollToDate=function(t){if(this.options.scrollToDate){var e=this.options.startDate instanceof a.DateTime?this.options.startDate.clone():null,n=this.options.endDate instanceof a.DateTime?this.options.endDate.clone():null;!this.options.startDate||t&&t!==this.options.element?t&&this.options.endDate&&t===this.options.elementEnd&&(n.setDate(1),this.options.numberOfMonths>1&&n.isAfter(e)&&n.setMonth(n.getMonth()-(this.options.numberOfMonths-1)),this.calendars[0]=n.clone()):(e.setDate(1),this.calendars[0]=e.clone())}},e.prototype.bindEvents=function(){document.addEventListener("click",this.onClick.bind(this),!0),this.ui=document.createElement("div"),this.ui.className=l.litepicker,this.ui.style.display="none",this.ui.addEventListener("mouseenter",this.onMouseEnter.bind(this),!0),this.ui.addEventListener("mouseleave",this.onMouseLeave.bind(this),!1),this.options.autoRefresh?(this.options.element instanceof HTMLElement&&this.options.element.addEventListener("keyup",this.onInput.bind(this),!0),this.options.elementEnd instanceof HTMLElement&&this.options.elementEnd.addEventListener("keyup",this.onInput.bind(this),!0)):(this.options.element instanceof HTMLElement&&this.options.element.addEventListener("change",this.onInput.bind(this),!0),this.options.elementEnd instanceof HTMLElement&&this.options.elementEnd.addEventListener("change",this.onInput.bind(this),!0)),this.options.parentEl?this.options.parentEl instanceof HTMLElement?this.options.parentEl.appendChild(this.ui):document.querySelector(this.options.parentEl).appendChild(this.ui):this.options.inlineMode?this.options.element instanceof HTMLInputElement?this.options.element.parentNode.appendChild(this.ui):this.options.element.appendChild(this.ui):document.body.appendChild(this.ui),this.updateInput(),this.init(),"function"==typeof this.options.setup&&this.options.setup.call(this,this),this.render(),this.options.inlineMode&&this.show()},e.prototype.updateInput=function(){if(this.options.element instanceof HTMLInputElement){var t=this.options.startDate,e=this.options.endDate;if(this.options.singleMode&&t)this.options.element.value=t.format(this.options.format,this.options.lang);else if(!this.options.singleMode&&t&&e){var n=t.format(this.options.format,this.options.lang),o=e.format(this.options.format,this.options.lang);this.options.elementEnd instanceof HTMLInputElement?(this.options.element.value=n,this.options.elementEnd.value=o):this.options.element.value=""+n+this.options.delimiter+o}t||e||(this.options.element.value="",this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.value=""))}},e.prototype.isSamePicker=function(t){return t.closest("."+l.litepicker)===this.ui},e.prototype.shouldShown=function(t){return!t.disabled&&(t===this.options.element||this.options.elementEnd&&t===this.options.elementEnd)},e.prototype.shouldResetDatePicked=function(){return this.options.singleMode||2===this.datePicked.length},e.prototype.shouldSwapDatePicked=function(){return 2===this.datePicked.length&&this.datePicked[0].getTime()>this.datePicked[1].getTime()},e.prototype.shouldCheckLockDays=function(){return this.options.disallowLockDaysInRange&&2===this.datePicked.length},e.prototype.onClick=function(t){var e=t.target;if(t.target.shadowRoot&&(e=t.composedPath()[0]),e&&this.ui)if(this.shouldShown(e))this.show(e);else if(e.closest("."+l.litepicker)||!this.isShowning()){if(this.isSamePicker(e))if(this.emit("before:click",e),this.preventClick)this.preventClick=!1;else{if(e.classList.contains(l.dayItem)){if(t.preventDefault(),e.classList.contains(l.isLocked))return;if(this.shouldResetDatePicked()&&(this.datePicked.length=0),this.datePicked[this.datePicked.length]=new a.DateTime(e.dataset.time),this.shouldSwapDatePicked()){var n=this.datePicked[1].clone();this.datePicked[1]=this.datePicked[0].clone(),this.datePicked[0]=n.clone()}return this.shouldCheckLockDays()&&c.rangeIsLocked(this.datePicked,this.options)&&(this.emit("error:range",this.datePicked),this.datePicked.length=0),this.render(),this.emit.apply(this,s(["preselect"],s(this.datePicked).map(function(t){return t.clone()}))),void(this.options.autoApply&&(this.options.singleMode&&this.datePicked.length?(this.setDate(this.datePicked[0]),this.hide()):this.options.singleMode||2!==this.datePicked.length||(this.setDateRange(this.datePicked[0],this.datePicked[1]),this.hide())))}if(e.classList.contains(l.buttonPreviousMonth)){t.preventDefault();var o=0,i=this.options.switchingMonths||this.options.numberOfMonths;if(this.options.splitView){var r=e.closest("."+l.monthItem);o=c.findNestedMonthItem(r),i=1}return this.calendars[o].setMonth(this.calendars[o].getMonth()-i),this.gotoDate(this.calendars[o],o),void this.emit("change:month",this.calendars[o],o)}if(e.classList.contains(l.buttonNextMonth))return t.preventDefault(),o=0,i=this.options.switchingMonths||this.options.numberOfMonths,this.options.splitView&&(r=e.closest("."+l.monthItem),o=c.findNestedMonthItem(r),i=1),this.calendars[o].setMonth(this.calendars[o].getMonth()+i),this.gotoDate(this.calendars[o],o),void this.emit("change:month",this.calendars[o],o);e.classList.contains(l.buttonCancel)&&(t.preventDefault(),this.hide(),this.emit("button:cancel")),e.classList.contains(l.buttonApply)&&(t.preventDefault(),this.options.singleMode&&this.datePicked.length?this.setDate(this.datePicked[0]):this.options.singleMode||2!==this.datePicked.length||this.setDateRange(this.datePicked[0],this.datePicked[1]),this.hide(),this.emit("button:apply",this.options.startDate,this.options.endDate))}}else this.hide()},e.prototype.showTooltip=function(t,e){var n=this.ui.querySelector("."+l.containerTooltip);n.style.visibility="visible",n.innerHTML=e;var o=this.ui.getBoundingClientRect(),i=n.getBoundingClientRect(),s=t.getBoundingClientRect(),r=s.top,a=s.left;if(this.options.inlineMode&&this.options.parentEl){var c=this.ui.parentNode.getBoundingClientRect();r-=c.top,a-=c.left}else r-=o.top,a-=o.left;r-=i.height,a-=i.width/2,a+=s.width/2,n.style.top=r+"px",n.style.left=a+"px",this.emit("tooltip",n,t)},e.prototype.hideTooltip=function(){this.ui.querySelector("."+l.containerTooltip).style.visibility="hidden"},e.prototype.shouldAllowMouseEnter=function(t){return!this.options.singleMode&&!t.classList.contains(l.isLocked)},e.prototype.shouldAllowRepick=function(){return this.options.elementEnd&&this.options.allowRepick&&this.options.startDate&&this.options.endDate},e.prototype.isDayItem=function(t){return t.classList.contains(l.dayItem)},e.prototype.onMouseEnter=function(t){var e=this,n=t.target;if(this.isDayItem(n)&&this.shouldAllowMouseEnter(n)){if(this.shouldAllowRepick()&&(this.triggerElement===this.options.element?this.datePicked[0]=this.options.endDate.clone():this.triggerElement===this.options.elementEnd&&(this.datePicked[0]=this.options.startDate.clone())),1!==this.datePicked.length)return;var o=this.ui.querySelector("."+l.dayItem+'[data-time="'+this.datePicked[0].getTime()+'"]'),i=this.datePicked[0].clone(),s=new a.DateTime(n.dataset.time),r=!1;if(i.getTime()>s.getTime()){var c=i.clone();i=s.clone(),s=c.clone(),r=!0}if(Array.prototype.slice.call(this.ui.querySelectorAll("."+l.dayItem)).forEach(function(t){var n=new a.DateTime(t.dataset.time),o=e.renderDay(n);n.isBetween(i,s)&&o.classList.add(l.isInRange),t.className=o.className}),n.classList.add(l.isEndDate),r?(o&&o.classList.add(l.isFlipped),n.classList.add(l.isFlipped)):(o&&o.classList.remove(l.isFlipped),n.classList.remove(l.isFlipped)),this.options.showTooltip){var d=s.diff(i,"day")+1;if("function"==typeof this.options.tooltipNumber&&(d=this.options.tooltipNumber.call(this,d)),d>0){var h=this.pluralSelector(d),p=d+" "+(this.options.tooltipText[h]?this.options.tooltipText[h]:"["+h+"]");this.showTooltip(n,p);var u=window.navigator.userAgent,m=/(iphone|ipad)/i.test(u),g=/OS 1([0-2])/i.test(u);m&&g&&n.dispatchEvent(new Event("click"))}else this.hideTooltip()}}},e.prototype.onMouseLeave=function(t){t.target,this.options.allowRepick&&(!this.options.allowRepick||this.options.startDate||this.options.endDate)&&(this.datePicked.length=0,this.render())},e.prototype.onInput=function(t){var e=this.parseInput(),n=e[0],o=e[1],i=this.options.format;if(this.options.elementEnd?n instanceof a.DateTime&&o instanceof a.DateTime&&n.format(i)===this.options.element.value&&o.format(i)===this.options.elementEnd.value:this.options.singleMode?n instanceof a.DateTime&&n.format(i)===this.options.element.value:n instanceof a.DateTime&&o instanceof a.DateTime&&""+n.format(i)+this.options.delimiter+o.format(i)===this.options.element.value){if(o&&n.getTime()>o.getTime()){var s=n.clone();n=o.clone(),o=s.clone()}this.options.startDate=new a.DateTime(n,this.options.format,this.options.lang),o&&(this.options.endDate=new a.DateTime(o,this.options.format,this.options.lang)),this.updateInput(),this.render();var r=n.clone(),l=0;(this.options.elementEnd?n.format(i)===t.target.value:t.target.value.startsWith(n.format(i)))||(r=o.clone(),l=this.options.numberOfMonths-1),this.emit("selected",this.getStartDate(),this.getEndDate()),this.gotoDate(r,l)}},e}(r.Calendar);e.Litepicker=d},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.findNestedMonthItem=function(t){for(var e=t.parentNode.childNodes,n=0;n<e.length;n+=1)if(e.item(n)===t)return n;return 0},e.dateIsLocked=function(t,e,n){var o=!1;return e.lockDays.length&&(o=e.lockDays.filter(function(n){return n instanceof Array?t.isBetween(n[0],n[1],e.lockDaysInclusivity):n.isSame(t,"day")}).length),o||"function"!=typeof e.lockDaysFilter||(o=e.lockDaysFilter.call(this,t.clone(),null,n)),o},e.rangeIsLocked=function(t,e){var n=!1;return e.lockDays.length&&(n=e.lockDays.filter(function(n){if(n instanceof Array){var o=t[0].toDateString()===n[0].toDateString()&&t[1].toDateString()===n[1].toDateString();return n[0].isBetween(t[0],t[1],e.lockDaysInclusivity)||n[1].isBetween(t[0],t[1],e.lockDaysInclusivity)||o}return n.isBetween(t[0],t[1],e.lockDaysInclusivity)}).length),n||"function"!=typeof e.lockDaysFilter||(n=e.lockDaysFilter.call(this,t[0].clone(),t[1].clone(),t)),n}},function(t,e,n){var o=n(8);"string"==typeof o&&(o=[[t.i,o,""]]);var i={insert:function(t){var e=document.querySelector("head"),n=window._lastElementInsertedByStyleLoader;window.disableLitepickerStyles||(n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.insertBefore(t,e.firstChild),window._lastElementInsertedByStyleLoader=t)},singleton:!1};n(10)(o,i),o.locals&&(t.exports=o.locals)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.Litepicker=o.Litepicker,n(11),window.Litepicker=o.Litepicker,e.default=o.Litepicker},function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),r=n(0),a=n(3),l=n(2),c=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.render=function(){var t=this;this.emit("before:render",this.ui);var e=document.createElement("div");e.className=a.containerMain;var n=document.createElement("div");n.className=a.containerMonths,a["columns"+this.options.numberOfColumns]&&(n.classList.remove(a.columns2,a.columns3,a.columns4),n.classList.add(a["columns"+this.options.numberOfColumns])),this.options.splitView&&n.classList.add(a.splitView),this.options.showWeekNumbers&&n.classList.add(a.showWeekNumbers);for(var o=this.calendars[0].clone(),i=o.getMonth(),s=o.getMonth()+this.options.numberOfMonths,r=0,l=i;l<s;l+=1){var c=o.clone();c.setDate(1),c.setHours(0,0,0,0),this.options.splitView?c=this.calendars[r].clone():c.setMonth(l),n.appendChild(this.renderMonth(c,r)),r+=1}if(this.ui.innerHTML="",e.appendChild(n),this.options.resetButton){var d=void 0;"function"==typeof this.options.resetButton?d=this.options.resetButton.call(this):((d=document.createElement("button")).type="button",d.className=a.resetButton,d.innerHTML=this.options.buttonText.reset),d.addEventListener("click",function(e){e.preventDefault(),t.clearSelection()}),e.querySelector("."+a.monthItem+":last-child").querySelector("."+a.monthItemHeader).appendChild(d)}this.ui.appendChild(e),this.options.autoApply&&!this.options.footerHTML||this.ui.appendChild(this.renderFooter()),this.options.showTooltip&&this.ui.appendChild(this.renderTooltip()),this.ui.dataset.plugins=(this.options.plugins||[]).join("|"),this.emit("render",this.ui)},e.prototype.renderMonth=function(t,e){var n=this,o=t.clone(),i=32-new Date(o.getFullYear(),o.getMonth(),32).getDate(),s=document.createElement("div");s.className=a.monthItem;var c=document.createElement("div");c.className=a.monthItemHeader;var d=document.createElement("div");if(this.options.dropdowns.months){var h=document.createElement("select");h.className=a.monthItemName;for(var p=0;p<12;p+=1){var u=document.createElement("option"),m=new r.DateTime(new Date(t.getFullYear(),p,2,0,0,0)),g=new r.DateTime(new Date(t.getFullYear(),p,1,0,0,0));u.value=String(p),u.text=m.toLocaleString(this.options.lang,{month:"long"}),u.disabled=this.options.minDate&&g.isBefore(new r.DateTime(this.options.minDate),"month")||this.options.maxDate&&g.isAfter(new r.DateTime(this.options.maxDate),"month"),u.selected=g.getMonth()===t.getMonth(),h.appendChild(u)}h.addEventListener("change",function(t){var e=t.target,o=0;if(n.options.splitView){var i=e.closest("."+a.monthItem);o=l.findNestedMonthItem(i)}n.calendars[o].setMonth(Number(e.value)),n.render(),n.emit("change:month",n.calendars[o],o,t)}),d.appendChild(h)}else(m=document.createElement("strong")).className=a.monthItemName,m.innerHTML=t.toLocaleString(this.options.lang,{month:"long"}),d.appendChild(m);if(this.options.dropdowns.years){var f=document.createElement("select");f.className=a.monthItemYear;var y=this.options.dropdowns.minYear,v=this.options.dropdowns.maxYear?this.options.dropdowns.maxYear:(new Date).getFullYear();for(t.getFullYear()>v&&((u=document.createElement("option")).value=String(t.getFullYear()),u.text=String(t.getFullYear()),u.selected=!0,u.disabled=!0,f.appendChild(u)),p=v;p>=y;p-=1){u=document.createElement("option");var b=new r.DateTime(new Date(p,0,1,0,0,0));u.value=String(p),u.text=String(p),u.disabled=this.options.minDate&&b.isBefore(new r.DateTime(this.options.minDate),"year")||this.options.maxDate&&b.isAfter(new r.DateTime(this.options.maxDate),"year"),u.selected=t.getFullYear()===p,f.appendChild(u)}if(t.getFullYear()<y&&((u=document.createElement("option")).value=String(t.getFullYear()),u.text=String(t.getFullYear()),u.selected=!0,u.disabled=!0,f.appendChild(u)),"asc"===this.options.dropdowns.years){var k=Array.prototype.slice.call(f.childNodes).reverse();f.innerHTML="",k.forEach(function(t){t.innerHTML=t.value,f.appendChild(t)})}f.addEventListener("change",function(t){var e=t.target,o=0;if(n.options.splitView){var i=e.closest("."+a.monthItem);o=l.findNestedMonthItem(i)}n.calendars[o].setFullYear(Number(e.value)),n.render(),n.emit("change:year",n.calendars[o],o,t)}),d.appendChild(f)}else{var x=document.createElement("span");x.className=a.monthItemYear,x.innerHTML=String(t.getFullYear()),d.appendChild(x)}var w=document.createElement("button");w.type="button",w.className=a.buttonPreviousMonth,w.innerHTML=this.options.buttonText.previousMonth;var D=document.createElement("button");D.type="button",D.className=a.buttonNextMonth,D.innerHTML=this.options.buttonText.nextMonth,c.appendChild(w),c.appendChild(d),c.appendChild(D),this.options.minDate&&o.isSameOrBefore(new r.DateTime(this.options.minDate),"month")&&s.classList.add(a.noPreviousMonth),this.options.maxDate&&o.isSameOrAfter(new r.DateTime(this.options.maxDate),"month")&&s.classList.add(a.noNextMonth);var _=document.createElement("div");_.className=a.monthItemWeekdaysRow,this.options.showWeekNumbers&&(_.innerHTML="<div>W</div>");for(var M=1;M<=7;M+=1){var E=3+this.options.firstDay+M,T=document.createElement("div");T.innerHTML=this.weekdayName(E),T.title=this.weekdayName(E,"long"),_.appendChild(T)}var L=document.createElement("div");L.className=a.containerDays;var I=this.calcSkipDays(o);this.options.showWeekNumbers&&I&&L.appendChild(this.renderWeekNumber(o));for(var S=0;S<I;S+=1){var B=document.createElement("div");L.appendChild(B)}for(S=1;S<=i;S+=1)o.setDate(S),this.options.showWeekNumbers&&o.getDay()===this.options.firstDay&&L.appendChild(this.renderWeekNumber(o)),L.appendChild(this.renderDay(o));return s.appendChild(c),s.appendChild(_),s.appendChild(L),this.emit("render:month",s,t),s},e.prototype.renderDay=function(t){t.setHours();var e=document.createElement("div");if(e.className=a.dayItem,e.innerHTML=String(t.getDate()),e.dataset.time=String(t.getTime()),t.toDateString()===(new Date).toDateString()&&e.classList.add(a.isToday),this.datePicked.length)this.datePicked[0].toDateString()===t.toDateString()&&(e.classList.add(a.isStartDate),this.options.singleMode&&e.classList.add(a.isEndDate)),2===this.datePicked.length&&this.datePicked[1].toDateString()===t.toDateString()&&e.classList.add(a.isEndDate),2===this.datePicked.length&&t.isBetween(this.datePicked[0],this.datePicked[1])&&e.classList.add(a.isInRange);else if(this.options.startDate){var n=this.options.startDate,o=this.options.endDate;n.toDateString()===t.toDateString()&&(e.classList.add(a.isStartDate),this.options.singleMode&&e.classList.add(a.isEndDate)),o&&o.toDateString()===t.toDateString()&&e.classList.add(a.isEndDate),n&&o&&t.isBetween(n,o)&&e.classList.add(a.isInRange)}if(this.options.minDate&&t.isBefore(new r.DateTime(this.options.minDate))&&e.classList.add(a.isLocked),this.options.maxDate&&t.isAfter(new r.DateTime(this.options.maxDate))&&e.classList.add(a.isLocked),this.options.minDays>1&&1===this.datePicked.length){var i=this.options.minDays-1,s=this.datePicked[0].clone().subtract(i,"day"),c=this.datePicked[0].clone().add(i,"day");t.isBetween(s,this.datePicked[0],"(]")&&e.classList.add(a.isLocked),t.isBetween(this.datePicked[0],c,"[)")&&e.classList.add(a.isLocked)}if(this.options.maxDays&&1===this.datePicked.length){var d=this.options.maxDays;s=this.datePicked[0].clone().subtract(d,"day"),c=this.datePicked[0].clone().add(d,"day"),t.isSameOrBefore(s)&&e.classList.add(a.isLocked),t.isSameOrAfter(c)&&e.classList.add(a.isLocked)}return this.options.selectForward&&1===this.datePicked.length&&t.isBefore(this.datePicked[0])&&e.classList.add(a.isLocked),this.options.selectBackward&&1===this.datePicked.length&&t.isAfter(this.datePicked[0])&&e.classList.add(a.isLocked),l.dateIsLocked(t,this.options,this.datePicked)&&e.classList.add(a.isLocked),this.options.highlightedDays.length&&this.options.highlightedDays.filter(function(e){return e instanceof Array?t.isBetween(e[0],e[1],"[]"):e.isSame(t,"day")}).length&&e.classList.add(a.isHighlighted),e.tabIndex=e.classList.contains("is-locked")?-1:0,this.emit("render:day",e,t),e},e.prototype.renderFooter=function(){var t=document.createElement("div");if(t.className=a.containerFooter,this.options.footerHTML?t.innerHTML=this.options.footerHTML:t.innerHTML='\n      <span class="'+a.previewDateRange+'"></span>\n      <button type="button" class="'+a.buttonCancel+'">'+this.options.buttonText.cancel+'</button>\n      <button type="button" class="'+a.buttonApply+'">'+this.options.buttonText.apply+"</button>\n      ",this.options.singleMode){if(1===this.datePicked.length){var e=this.datePicked[0].format(this.options.format,this.options.lang);t.querySelector("."+a.previewDateRange).innerHTML=e}}else if(1===this.datePicked.length&&t.querySelector("."+a.buttonApply).setAttribute("disabled",""),2===this.datePicked.length){e=this.datePicked[0].format(this.options.format,this.options.lang);var n=this.datePicked[1].format(this.options.format,this.options.lang);t.querySelector("."+a.previewDateRange).innerHTML=""+e+this.options.delimiter+n}return this.emit("render:footer",t),t},e.prototype.renderWeekNumber=function(t){var e=document.createElement("div"),n=t.getWeek(this.options.firstDay);return e.className=a.weekNumber,e.innerHTML=53===n&&0===t.getMonth()?"53 / 1":n,e},e.prototype.renderTooltip=function(){var t=document.createElement("div");return t.className=a.containerTooltip,t},e.prototype.weekdayName=function(t,e){return void 0===e&&(e="short"),new Date(1970,0,t,12,0,0,0).toLocaleString(this.options.lang,{weekday:e})},e.prototype.calcSkipDays=function(t){var e=t.getDay()-this.options.firstDay;return e<0&&(e+=7),e},e}(s.LPCore);e.Calendar=c},function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),a=n(0),l=n(1),c=function(t){function e(e){var n=t.call(this)||this;n.datePicked=[],n.calendars=[],n.options={element:null,elementEnd:null,parentEl:null,firstDay:1,format:"YYYY-MM-DD",lang:"en-US",delimiter:" - ",numberOfMonths:1,numberOfColumns:1,startDate:null,endDate:null,zIndex:9999,position:"auto",selectForward:!1,selectBackward:!1,splitView:!1,inlineMode:!1,singleMode:!0,autoApply:!0,allowRepick:!1,showWeekNumbers:!1,showTooltip:!0,scrollToDate:!0,mobileFriendly:!0,resetButton:!1,autoRefresh:!1,lockDaysFormat:"YYYY-MM-DD",lockDays:[],disallowLockDaysInRange:!1,lockDaysInclusivity:"[]",highlightedDaysFormat:"YYYY-MM-DD",highlightedDays:[],dropdowns:{minYear:1990,maxYear:null,months:!1,years:!1},buttonText:{apply:"Apply",cancel:"Cancel",previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',reset:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n        <path d="M0 0h24v24H0z" fill="none"/>\n        <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>\n      </svg>'},tooltipText:{one:"day",other:"days"}},n.options=s(s({},n.options),e.element.dataset),Object.keys(n.options).forEach(function(t){"true"!==n.options[t]&&"false"!==n.options[t]||(n.options[t]="true"===n.options[t])});var o=s(s({},n.options.dropdowns),e.dropdowns),i=s(s({},n.options.buttonText),e.buttonText),r=s(s({},n.options.tooltipText),e.tooltipText);n.options=s(s({},n.options),e),n.options.dropdowns=s({},o),n.options.buttonText=s({},i),n.options.tooltipText=s({},r),n.options.elementEnd||(n.options.allowRepick=!1),n.options.lockDays.length&&(n.options.lockDays=a.DateTime.convertArray(n.options.lockDays,n.options.lockDaysFormat)),n.options.highlightedDays.length&&(n.options.highlightedDays=a.DateTime.convertArray(n.options.highlightedDays,n.options.highlightedDaysFormat));var l=n.parseInput(),c=l[0],d=l[1];n.options.startDate&&(n.options.singleMode||n.options.endDate)&&(c=new a.DateTime(n.options.startDate,n.options.format,n.options.lang)),c&&n.options.endDate&&(d=new a.DateTime(n.options.endDate,n.options.format,n.options.lang)),c instanceof a.DateTime&&!isNaN(c.getTime())&&(n.options.startDate=c),n.options.startDate&&d instanceof a.DateTime&&!isNaN(d.getTime())&&(n.options.endDate=d),!n.options.singleMode||n.options.startDate instanceof a.DateTime||(n.options.startDate=null),n.options.singleMode||n.options.startDate instanceof a.DateTime&&n.options.endDate instanceof a.DateTime||(n.options.startDate=null,n.options.endDate=null);for(var h=0;h<n.options.numberOfMonths;h+=1){var p=n.options.startDate instanceof a.DateTime?n.options.startDate.clone():new a.DateTime;if(!n.options.startDate&&(0===h||n.options.splitView)){var u=n.options.maxDate?new a.DateTime(n.options.maxDate):null,m=n.options.minDate?new a.DateTime(n.options.minDate):null,g=n.options.numberOfMonths-1;m&&u&&p.isAfter(u)?(p=m.clone()).setDate(1):!m&&u&&p.isAfter(u)&&((p=u.clone()).setDate(1),p.setMonth(p.getMonth()-g))}p.setDate(1),p.setMonth(p.getMonth()+h),n.calendars[h]=p}if(n.options.showTooltip)if(n.options.tooltipPluralSelector)n.pluralSelector=n.options.tooltipPluralSelector;else try{var f=new Intl.PluralRules(n.options.lang);n.pluralSelector=f.select.bind(f)}catch(y){n.pluralSelector=function(t){return 0===Math.abs(t)?"one":"other"}}return n}return i(e,t),e.add=function(t,e){l.Litepicker.prototype[t]=e},e.prototype.DateTime=function(t,e){return t?new a.DateTime(t,e):new a.DateTime},e.prototype.init=function(){var t=this;this.options.plugins&&this.options.plugins.length&&this.options.plugins.forEach(function(e){l.Litepicker.prototype.hasOwnProperty(e)?l.Litepicker.prototype[e].init.call(t,t):console.warn("Litepicker: plugin «"+e+"» not found.")})},e.prototype.parseInput=function(){var t=this.options.delimiter,e=new RegExp(""+t),n=this.options.element instanceof HTMLInputElement?this.options.element.value.split(t):[];if(this.options.elementEnd){if(this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length)return[new a.DateTime(this.options.element.value,this.options.format),new a.DateTime(this.options.elementEnd.value,this.options.format)]}else if(this.options.singleMode){if(this.options.element instanceof HTMLInputElement&&this.options.element.value.length)return[new a.DateTime(this.options.element.value,this.options.format)]}else if(this.options.element instanceof HTMLInputElement&&e.test(this.options.element.value)&&n.length&&n.length%2==0){var o=n.slice(0,n.length/2).join(t),i=n.slice(n.length/2).join(t);return[new a.DateTime(o,this.options.format),new a.DateTime(i,this.options.format)]}return[]},e.prototype.isShowning=function(){return this.ui&&"none"!==this.ui.style.display},e.prototype.findPosition=function(t){var e=t.getBoundingClientRect(),n=this.ui.getBoundingClientRect(),o=this.options.position.split(" "),i=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset,r=0,a=0;if("auto"!==o[0]&&/top|bottom/.test(o[0]))r=e[o[0]]+s,"top"===o[0]&&(r-=n.height);else{r=e.bottom+s;var l=e.bottom+n.height>window.innerHeight,c=e.top+s-n.height>=n.height;l&&c&&(r=e.top+s-n.height)}if(/left|right/.test(o[0])||o[1]&&"auto"!==o[1]&&/left|right/.test(o[1]))a=/left|right/.test(o[0])?e[o[0]]+i:e[o[1]]+i,"right"!==o[0]&&"right"!==o[1]||(a-=n.width);else{a=e.left+i,l=e.left+n.width>window.innerWidth;var d=e.right+i-n.width>=0;l&&d&&(a=e.right+i-n.width)}return{left:a,top:r}},e}(r.EventEmitter);e.LPCore=c},function(t,e,n){var o,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};o=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function d(t,e,n,o){var i,s,r,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),r=s[e]),void 0===r)r=s[e]=n,++t._eventsCount;else if("function"==typeof r?r=s[e]=o?[n,r]:[r,n]:o?r.unshift(n):r.push(n),(i=c(t))>0&&r.length>i&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=r.length,a=l,console&&console.warn&&console.warn(a)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,t))}function p(t,e,n){var o={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(o);return i.listener=n,o.wrapFn=i,i}function u(t,e,n){var o=t._events;if(void 0===o)return[];var i=o[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),o=0;o<e;++o)n[o]=t[o];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)s(l,this,e);else{var c=l.length,d=g(l,c);for(n=0;n<c;++n)s(d[n],this,e)}return!0},a.prototype.addListener=function(t,e){return d(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return d(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,o,i,s,r;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(o=this._events))return this;if(void 0===(n=o[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){r=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(o[t]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",t,r||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,s=Object.keys(n);for(o=0;o<s.length;++o)"removeListener"!==(i=s[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},a.prototype.listeners=function(t){return u(this,t,!0)},a.prototype.rawListeners=function(t){return u(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(t,e,n){(e=n(9)(!1)).push([t.i,':root{--litepicker-container-months-color-bg: #fff;--litepicker-container-months-box-shadow-color: #ddd;--litepicker-footer-color-bg: #fafafa;--litepicker-footer-box-shadow-color: #ddd;--litepicker-tooltip-color-bg: #fff;--litepicker-month-header-color: #333;--litepicker-button-prev-month-color: #9e9e9e;--litepicker-button-next-month-color: #9e9e9e;--litepicker-button-prev-month-color-hover: #2196f3;--litepicker-button-next-month-color-hover: #2196f3;--litepicker-month-width: calc(var(--litepicker-day-width) * 7);--litepicker-month-weekday-color: #9e9e9e;--litepicker-month-week-number-color: #9e9e9e;--litepicker-day-width: 38px;--litepicker-day-color: #333;--litepicker-day-color-hover: #2196f3;--litepicker-is-today-color: #f44336;--litepicker-is-in-range-color: #bbdefb;--litepicker-is-locked-color: #9e9e9e;--litepicker-is-start-color: #fff;--litepicker-is-start-color-bg: #2196f3;--litepicker-is-end-color: #fff;--litepicker-is-end-color-bg: #2196f3;--litepicker-button-cancel-color: #fff;--litepicker-button-cancel-color-bg: #9e9e9e;--litepicker-button-apply-color: #fff;--litepicker-button-apply-color-bg: #2196f3;--litepicker-button-reset-color: #909090;--litepicker-button-reset-color-hover: #2196f3;--litepicker-highlighted-day-color: #333;--litepicker-highlighted-day-color-bg: #ffeb3b}.show-week-numbers{--litepicker-month-width: calc(var(--litepicker-day-width) * 8)}.litepicker{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;font-size:0.8em;display:none}.litepicker button{border:none;background:none}.litepicker .container__main{display:-webkit-box;display:-ms-flexbox;display:flex}.litepicker .container__months{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:var(--litepicker-container-months-color-bg);border-radius:5px;-webkit-box-shadow:0 0 5px var(--litepicker-container-months-box-shadow-color);box-shadow:0 0 5px var(--litepicker-container-months-box-shadow-color);width:calc(var(--litepicker-month-width) + 10px);-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__months.columns-2{width:calc((var(--litepicker-month-width) * 2) + 20px)}.litepicker .container__months.columns-3{width:calc((var(--litepicker-month-width) * 3) + 30px)}.litepicker .container__months.columns-4{width:calc((var(--litepicker-month-width) * 4) + 40px)}.litepicker .container__months.split-view .month-item-header .button-previous-month,.litepicker .container__months.split-view .month-item-header .button-next-month{visibility:visible}.litepicker .container__months .month-item{padding:5px;width:var(--litepicker-month-width);-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__months .month-item-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:500;padding:10px 5px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--litepicker-month-header-color)}.litepicker .container__months .month-item-header div{-webkit-box-flex:1;-ms-flex:1;flex:1}.litepicker .container__months .month-item-header div>.month-item-name{margin-right:5px}.litepicker .container__months .month-item-header div>.month-item-year{padding:0}.litepicker .container__months .month-item-header .reset-button{color:var(--litepicker-button-reset-color)}.litepicker .container__months .month-item-header .reset-button>svg{fill:var(--litepicker-button-reset-color)}.litepicker .container__months .month-item-header .reset-button *{pointer-events:none}.litepicker .container__months .month-item-header .reset-button:hover{color:var(--litepicker-button-reset-color-hover)}.litepicker .container__months .month-item-header .reset-button:hover>svg{fill:var(--litepicker-button-reset-color-hover)}.litepicker .container__months .month-item-header .button-previous-month,.litepicker .container__months .month-item-header .button-next-month{visibility:hidden;text-decoration:none;padding:3px 5px;border-radius:3px;-webkit-transition:color 0.3s, border 0.3s;transition:color 0.3s, border 0.3s;cursor:default}.litepicker .container__months .month-item-header .button-previous-month *,.litepicker .container__months .month-item-header .button-next-month *{pointer-events:none}.litepicker .container__months .month-item-header .button-previous-month{color:var(--litepicker-button-prev-month-color)}.litepicker .container__months .month-item-header .button-previous-month>svg,.litepicker .container__months .month-item-header .button-previous-month>img{fill:var(--litepicker-button-prev-month-color)}.litepicker .container__months .month-item-header .button-previous-month:hover{color:var(--litepicker-button-prev-month-color-hover)}.litepicker .container__months .month-item-header .button-previous-month:hover>svg{fill:var(--litepicker-button-prev-month-color-hover)}.litepicker .container__months .month-item-header .button-next-month{color:var(--litepicker-button-next-month-color)}.litepicker .container__months .month-item-header .button-next-month>svg,.litepicker .container__months .month-item-header .button-next-month>img{fill:var(--litepicker-button-next-month-color)}.litepicker .container__months .month-item-header .button-next-month:hover{color:var(--litepicker-button-next-month-color-hover)}.litepicker .container__months .month-item-header .button-next-month:hover>svg{fill:var(--litepicker-button-next-month-color-hover)}.litepicker .container__months .month-item-weekdays-row{display:-webkit-box;display:-ms-flexbox;display:flex;justify-self:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;color:var(--litepicker-month-weekday-color)}.litepicker .container__months .month-item-weekdays-row>div{padding:5px 0;font-size:85%;-webkit-box-flex:1;-ms-flex:1;flex:1;width:var(--litepicker-day-width);text-align:center}.litepicker .container__months .month-item:first-child .button-previous-month{visibility:visible}.litepicker .container__months .month-item:last-child .button-next-month{visibility:visible}.litepicker .container__months .month-item.no-previous-month .button-previous-month{visibility:hidden}.litepicker .container__months .month-item.no-next-month .button-next-month{visibility:hidden}.litepicker .container__days{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;justify-self:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:center;-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__days>div,.litepicker .container__days>a{padding:5px 0;width:var(--litepicker-day-width)}.litepicker .container__days .day-item{color:var(--litepicker-day-color);text-align:center;text-decoration:none;border-radius:3px;-webkit-transition:color 0.3s, border 0.3s;transition:color 0.3s, border 0.3s;cursor:default}.litepicker .container__days .day-item:hover{color:var(--litepicker-day-color-hover);-webkit-box-shadow:inset 0 0 0 1px var(--litepicker-day-color-hover);box-shadow:inset 0 0 0 1px var(--litepicker-day-color-hover)}.litepicker .container__days .day-item.is-today{color:var(--litepicker-is-today-color)}.litepicker .container__days .day-item.is-locked{color:var(--litepicker-is-locked-color)}.litepicker .container__days .day-item.is-locked:hover{color:var(--litepicker-is-locked-color);-webkit-box-shadow:none;box-shadow:none;cursor:default}.litepicker .container__days .day-item.is-in-range{background-color:var(--litepicker-is-in-range-color);border-radius:0}.litepicker .container__days .day-item.is-start-date{color:var(--litepicker-is-start-color);background-color:var(--litepicker-is-start-color-bg);border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:0;border-bottom-right-radius:0}.litepicker .container__days .day-item.is-start-date.is-flipped{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-end-date{color:var(--litepicker-is-end-color);background-color:var(--litepicker-is-end-color-bg);border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-end-date.is-flipped{border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:0;border-bottom-right-radius:0}.litepicker .container__days .day-item.is-start-date.is-end-date{border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-highlighted{color:var(--litepicker-highlighted-day-color);background-color:var(--litepicker-highlighted-day-color-bg)}.litepicker .container__days .week-number{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:var(--litepicker-month-week-number-color);font-size:85%}.litepicker .container__footer{text-align:right;padding:10px 5px;margin:0 5px;background-color:var(--litepicker-footer-color-bg);-webkit-box-shadow:inset 0px 3px 3px 0px var(--litepicker-footer-box-shadow-color);box-shadow:inset 0px 3px 3px 0px var(--litepicker-footer-box-shadow-color);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.litepicker .container__footer .preview-date-range{margin-right:10px;font-size:90%}.litepicker .container__footer .button-cancel{background-color:var(--litepicker-button-cancel-color-bg);color:var(--litepicker-button-cancel-color);border:0;padding:3px 7px 4px;border-radius:3px}.litepicker .container__footer .button-cancel *{pointer-events:none}.litepicker .container__footer .button-apply{background-color:var(--litepicker-button-apply-color-bg);color:var(--litepicker-button-apply-color);border:0;padding:3px 7px 4px;border-radius:3px;margin-left:10px;margin-right:10px}.litepicker .container__footer .button-apply:disabled{opacity:0.7}.litepicker .container__footer .button-apply *{pointer-events:none}.litepicker .container__tooltip{position:absolute;margin-top:-4px;padding:4px 8px;border-radius:4px;background-color:var(--litepicker-tooltip-color-bg);-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.25);box-shadow:0 1px 3px rgba(0,0,0,0.25);white-space:nowrap;font-size:11px;pointer-events:none;visibility:hidden}.litepicker .container__tooltip:before{position:absolute;bottom:-5px;left:calc(50% - 5px);border-top:5px solid rgba(0,0,0,0.12);border-right:5px solid transparent;border-left:5px solid transparent;content:""}.litepicker .container__tooltip:after{position:absolute;bottom:-4px;left:calc(50% - 4px);border-top:4px solid var(--litepicker-tooltip-color-bg);border-right:4px solid transparent;border-left:4px solid transparent;content:""}\n',""]),e.locals={showWeekNumbers:"show-week-numbers",litepicker:"litepicker",containerMain:"container__main",containerMonths:"container__months",columns2:"columns-2",columns3:"columns-3",columns4:"columns-4",splitView:"split-view",monthItemHeader:"month-item-header",buttonPreviousMonth:"button-previous-month",buttonNextMonth:"button-next-month",monthItem:"month-item",monthItemName:"month-item-name",monthItemYear:"month-item-year",resetButton:"reset-button",monthItemWeekdaysRow:"month-item-weekdays-row",noPreviousMonth:"no-previous-month",noNextMonth:"no-next-month",containerDays:"container__days",dayItem:"day-item",isToday:"is-today",isLocked:"is-locked",isInRange:"is-in-range",isStartDate:"is-start-date",isFlipped:"is-flipped",isEndDate:"is-end-date",isHighlighted:"is-highlighted",weekNumber:"week-number",containerFooter:"container__footer",previewDateRange:"preview-date-range",buttonCancel:"button-cancel",buttonApply:"button-apply",containerTooltip:"container__tooltip"},t.exports=e},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n,o,i,s=t[1]||"",r=t[3];if(!r)return s;if(e&&"function"==typeof btoa){var a=(n=r,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(i," */")),l=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")});return[s].concat(l).concat([a]).join("\n")}return[s].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(i[r]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);o&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){var o,i,s={},r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},a=(i={},function(t){if(void 0===i[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}i[t]=e}return i[t]});function l(t,e){for(var n=[],o={},i=0;i<t.length;i++){var s=t[i],r=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};o[r]?o[r].parts.push(a):n.push(o[r]={id:r,parts:[a]})}return n}function c(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=s[o.id],r=0;if(i){for(i.refs++;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(y(o.parts[r],e))}else{for(var a=[];r<o.parts.length;r++)a.push(y(o.parts[r],e));s[o.id]={id:o.id,refs:1,parts:a}}}}function d(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var o=n.nc;o&&(t.attributes.nonce=o)}if(Object.keys(t.attributes).forEach(function(n){e.setAttribute(n,t.attributes[n])}),"function"==typeof t.insert)t.insert(e);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var h,p=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function u(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=p(e,i);else{var s=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}function m(t,e,n){var o=n.css,i=n.media,s=n.sourceMap;if(i&&t.setAttribute("media",i),s&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var g=null,f=0;function y(t,e){var n,o,i;if(e.singleton){var s=f++;n=g||(g=d(e)),o=u.bind(null,n,s,!1),i=u.bind(null,n,s,!0)}else n=d(e),o=m.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=l(t,e);return c(n,e),function(t){for(var o=[],i=0;i<n.length;i++){var r=n[i],a=s[r.id];a&&(a.refs--,o.push(a))}t&&c(l(t,e),e);for(var d=0;d<o.length;d++){var h=o[d];if(0===h.refs){for(var p=0;p<h.parts.length;p++)h.parts[p]();delete s[h.id]}}}}},function(t,e,n){var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(1),r=n(2);s.Litepicker.prototype.show=function(t){void 0===t&&(t=null),this.emit("before:show",t);var e=t||this.options.element;if(this.triggerElement=e,!this.isShowning()){if(this.options.inlineMode)return this.ui.style.position="relative",this.ui.style.display="inline-block",this.ui.style.top=null,this.ui.style.left=null,this.ui.style.bottom=null,void(this.ui.style.right=null);this.scrollToDate(t),this.render(),this.ui.style.position="absolute",this.ui.style.display="block",this.ui.style.zIndex=this.options.zIndex;var n=this.findPosition(e);this.ui.style.top=n.top+"px",this.ui.style.left=n.left+"px",this.ui.style.right=null,this.ui.style.bottom=null,this.emit("show",t)}},s.Litepicker.prototype.hide=function(){this.isShowning()&&(this.datePicked.length=0,this.updateInput(),this.options.inlineMode?this.render():(this.ui.style.display="none",this.emit("hide")))},s.Litepicker.prototype.getDate=function(){return this.getStartDate()},s.Litepicker.prototype.getStartDate=function(){return this.options.startDate?this.options.startDate.clone():null},s.Litepicker.prototype.getEndDate=function(){return this.options.endDate?this.options.endDate.clone():null},s.Litepicker.prototype.setDate=function(t,e){void 0===e&&(e=!1);var n=new i.DateTime(t,this.options.format,this.options.lang);r.dateIsLocked(n,this.options,[n])&&!e?this.emit("error:date",n):(this.setStartDate(t),this.options.inlineMode&&this.render(),this.emit("selected",this.getDate()))},s.Litepicker.prototype.setStartDate=function(t){t&&(this.options.startDate=new i.DateTime(t,this.options.format,this.options.lang),this.updateInput())},s.Litepicker.prototype.setEndDate=function(t){t&&(this.options.endDate=new i.DateTime(t,this.options.format,this.options.lang),this.options.startDate.getTime()>this.options.endDate.getTime()&&(this.options.endDate=this.options.startDate.clone(),this.options.startDate=new i.DateTime(t,this.options.format,this.options.lang)),this.updateInput())},s.Litepicker.prototype.setDateRange=function(t,e,n){void 0===n&&(n=!1),this.triggerElement=void 0;var o=new i.DateTime(t,this.options.format,this.options.lang),s=new i.DateTime(e,this.options.format,this.options.lang);(this.options.disallowLockDaysInRange?r.rangeIsLocked([o,s],this.options):r.dateIsLocked(o,this.options,[o,s])||r.dateIsLocked(s,this.options,[o,s]))&&!n?this.emit("error:range",[o,s]):(this.setStartDate(o),this.setEndDate(s),this.options.inlineMode&&this.render(),this.updateInput(),this.emit("selected",this.getStartDate(),this.getEndDate()))},s.Litepicker.prototype.gotoDate=function(t,e){void 0===e&&(e=0);var n=new i.DateTime(t);n.setDate(1),this.calendars[e]=n.clone(),this.render()},s.Litepicker.prototype.setLockDays=function(t){this.options.lockDays=i.DateTime.convertArray(t,this.options.lockDaysFormat),this.render()},s.Litepicker.prototype.setHighlightedDays=function(t){this.options.highlightedDays=i.DateTime.convertArray(t,this.options.highlightedDaysFormat),this.render()},s.Litepicker.prototype.setOptions=function(t){delete t.element,delete t.elementEnd,delete t.parentEl,t.startDate&&(t.startDate=new i.DateTime(t.startDate,this.options.format,this.options.lang)),t.endDate&&(t.endDate=new i.DateTime(t.endDate,this.options.format,this.options.lang));var e=o(o({},this.options.dropdowns),t.dropdowns),n=o(o({},this.options.buttonText),t.buttonText),s=o(o({},this.options.tooltipText),t.tooltipText);this.options=o(o({},this.options),t),this.options.dropdowns=o({},e),this.options.buttonText=o({},n),this.options.tooltipText=o({},s),!this.options.singleMode||this.options.startDate instanceof i.DateTime||(this.options.startDate=null,this.options.endDate=null),this.options.singleMode||this.options.startDate instanceof i.DateTime&&this.options.endDate instanceof i.DateTime||(this.options.startDate=null,this.options.endDate=null);for(var r=0;r<this.options.numberOfMonths;r+=1){var a=this.options.startDate?this.options.startDate.clone():new i.DateTime;a.setDate(1),a.setMonth(a.getMonth()+r),this.calendars[r]=a}this.options.lockDays.length&&(this.options.lockDays=i.DateTime.convertArray(this.options.lockDays,this.options.lockDaysFormat)),this.options.highlightedDays.length&&(this.options.highlightedDays=i.DateTime.convertArray(this.options.highlightedDays,this.options.highlightedDaysFormat)),this.render(),this.options.inlineMode&&this.show(),this.updateInput()},s.Litepicker.prototype.clearSelection=function(){this.options.startDate=null,this.options.endDate=null,this.datePicked.length=0,this.updateInput(),this.isShowning()&&this.render(),this.emit("clear:selection")},s.Litepicker.prototype.destroy=function(){this.ui&&this.ui.parentNode&&(this.ui.parentNode.removeChild(this.ui),this.ui=null),this.emit("destroy")}}]));class o{constructor(t){this.container=null,this.isInitialized=!1,this.currentBookingContext={},this.baseUrl="https://chsres.com/api/plugin/v1",this.options={...this.getDefaultOptions(),...t},this.validateOptions(),this.init()}getDefaultOptions(){return{theme:{primaryColor:"#007bff",secondaryColor:"#6c757d",fontFamily:"Arial, sans-serif",borderRadius:"4px"},locale:"en-US",currency:"USD",dateFormat:"MM/dd/yyyy",autoSearch:!0,debug:!1}}validateOptions(){if(!this.options.target)throw new Error("CkhBookingEngine: target option is required")}init(){var t;try{this.setupContainer(),this.renderBookingForm(),this.attachEventListeners(),this.isInitialized=!0,this.options.debug&&(console.log("CkhBookingEngine initialized successfully"),console.log("API Key:",this.options.apiKey?`${this.options.apiKey.substring(0,8)}...`:"Not provided"),console.log("Options:",{...this.options,apiKey:"[HIDDEN]"})),!1!==this.options.autoSearch&&this.performInitialSearch()}catch(e){console.error("Failed to initialize CkhBookingEngine:",e),(null==(t=this.options.callbacks)?void 0:t.onBookingError)&&this.options.callbacks.onBookingError(e)}}setupContainer(){var t;if("string"==typeof this.options.target?(this.container=document.getElementById(this.options.target),this.container||(this.container=document.querySelector(this.options.target))):this.container=this.options.target,!this.container)throw new Error(`CkhBookingEngine: Could not find target element: ${this.options.target}`);this.container.classList.add("ckh-booking-engine"),(null==(t=this.options.customClasses)?void 0:t.container)&&this.container.classList.add(this.options.customClasses.container)}renderBookingForm(){var t,e;if(!this.container)return;this.setCSSCustomProperties();const n=`\n    <div class="ckh-booking-form">\n\n  <div class="ckh-form-body">\n    \x3c!-- Side by side row --\x3e\n    <div class="ckh-form-row flex gap-4">\n      \x3c!-- Date --\x3e\n      <div class="ckh-form-group flex-1">\n        <label for="ckh-daterange">Check in / Check Out Date</label>\n        <input\n          type="text"\n          id="ckh-daterange"\n          class="ckh-input ${(null==(t=this.options.customClasses)?void 0:t.input)||""}"\n          readonly\n        />\n      </div>\n\n      \x3c!-- Guests Dropdown --\x3e\n      <div class="ckh-form-group flex-1 relative">\n        <label>Guests & Rooms</label>\n        <div\n          id="ckh-guests-toggle"\n          class="ckh-input cursor-pointer bg-white border rounded px-3 py-2"\n        >\n          <span id="ckh-guests-summary">1 Adult, 0 Children, 1 Room</span>\n        </div>\n\n        \x3c!-- Dropdown Panel --\x3e\n        <div\n          id="ckh-guests-dropdown"\n          class="absolute z-10 mt-2 w-full bg-white border rounded-lg shadow-lg p-4 space-y-3 hidden"\n        >\n          \x3c!-- Adults --\x3e\n          <div class="flex items-center justify-between">\n            <span>Adults</span>\n            <div class="flex items-center gap-2">\n              <button type="button" id="ckh-adults-minus" class="px-2 py-1 border rounded">-</button>\n              <span id="ckh-adults-count">1</span>\n              <button type="button" id="ckh-adults-plus" class="px-2 py-1 border rounded">+</button>\n            </div>\n          </div>\n\n          \x3c!-- Children --\x3e\n          <div class="flex items-center justify-between">\n            <span>Children</span>\n            <div class="flex items-center gap-2">\n              <button type="button" id="ckh-children-minus" class="px-2 py-1 border rounded">-</button>\n              <span id="ckh-children-count">0</span>\n              <button type="button" id="ckh-children-plus" class="px-2 py-1 border rounded">+</button>\n            </div>\n          </div>\n\n          \x3c!-- Rooms --\x3e\n          <div class="flex items-center justify-between">\n            <span>Rooms</span>\n            <div class="flex items-center gap-2">\n              <button type="button" id="ckh-rooms-minus" class="px-2 py-1 border rounded">-</button>\n              <span id="ckh-rooms-count">1</span>\n              <button type="button" id="ckh-rooms-plus" class="px-2 py-1 border rounded">+</button>\n            </div>\n          </div>\n\n          \x3c!-- Pets --\x3e\n          <hr class="my-2 border-gray-200" />\n          <div class="flex items-center justify-between">\n            <label class="flex items-center gap-2 cursor-pointer">\n              <input type="checkbox" id="ckh-pets" class="w-4 h-4 text-blue-600 border-gray-300 rounded" />\n              <span>Pet friendly</span>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Search --\x3e\n    <div class="ckh-form-actions mt-4">\n      <button\n        type="button"\n        id="ckh-search-btn"\n        class="ckh-btn w-full rounded-lg ckh-btn-primary ${(null==(e=this.options.customClasses)?void 0:e.button)||""}"\n      >\n        Search\n      </button>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Room Results Container --\x3e\n<div id="ckh-room-preview" class="mt-6"></div>\n\n\x3c!-- Booking Form Modal --\x3e\n<div id="ckh-booking-modal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-50">\n  <div class="flex items-center justify-center min-h-screen p-4">\n    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-2xl p-6 flex flex-col gap-4 w-full max-h-[90vh] overflow-y-auto">\n      \x3c!-- Close Button --\x3e\n      <div class="flex justify-between items-center mb-2">\n        <h2 class="text-xl font-bold text-gray-800">Hotel Booking Form</h2>\n        <button id="ckh-close-booking" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>\n      </div>\n\n      \x3c!-- Room Type (readonly) --\x3e\n      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">\n        <div>\n          <label class="text-sm font-medium text-gray-600">Room Type</label>\n          <input type="text" id="ckh-booking-room-type" readonly class="w-full border rounded-lg py-2 text-sm outline-none bg-gray-100 cursor-not-allowed" />\n        </div>\n        <div>\n          <label class="text-sm font-medium text-gray-600">Room Price</label>\n          <input type="text" id="ckh-booking-room-price" readonly class="w-full border rounded-lg py-2 text-sm outline-none bg-gray-100 cursor-not-allowed" />\n        </div>\n      </div>\n\n      \x3c!-- Guest Info --\x3e\n      <div class="flex flex-col gap-3">\n        <div>\n          <label class="text-sm font-medium text-gray-600">Full Name</label>\n          <input type="text" id="ckh-booking-full-name" placeholder="Enter your name" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n        </div>\n        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">\n          <div>\n            <label class="text-sm font-medium text-gray-600">Email Address</label>\n            <input type="email" id="ckh-booking-email" placeholder="you@example.com" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n          </div>\n          <div>\n            <label class="text-sm font-medium text-gray-600">Phone Number</label>\n            <input type="tel" id="ckh-booking-phone" placeholder="+62 812 3456 7890" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Dates --\x3e\n      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">\n        <div>\n          <label class="text-sm font-medium text-gray-600">Check-In</label>\n          <input type="date" id="ckh-booking-checkin" readonly class="w-full border rounded-lg py-2 text-sm outline-none bg-gray-100 cursor-not-allowed" />\n        </div>\n        <div>\n          <label class="text-sm font-medium text-gray-600">Check-Out</label>\n          <input type="date" id="ckh-booking-checkout" readonly class="w-full border rounded-lg py-2 text-sm outline-none bg-gray-100 cursor-not-allowed" />\n        </div>\n      </div>\n\n      \x3c!-- Guests --\x3e\n      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">\n        <div>\n          <label class="text-sm font-medium text-gray-600">Adults</label>\n          <input type="number" id="ckh-booking-adults" min="1" readonly class="w-full border rounded-lg py-2 text-sm outline-none bg-gray-100 cursor-not-allowed" />\n        </div>\n        <div>\n          <label class="text-sm font-medium text-gray-600">Children</label>\n          <input type="number" id="ckh-booking-children" min="0" readonly class="w-full border rounded-lg py-2 text-sm outline-none bg-gray-100 cursor-not-allowed" />\n        </div>\n      </div>\n\n      \x3c!-- Address --\x3e\n      <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">\n        <div>\n          <label class="text-sm font-medium text-gray-600">Country</label>\n          <input type="text" id="ckh-booking-country" placeholder="Enter country" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n        </div>\n        <div>\n          <label class="text-sm font-medium text-gray-600">State</label>\n          <input type="text" id="ckh-booking-state" placeholder="Enter state" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n        </div>\n        <div>\n          <label class="text-sm font-medium text-gray-600">City</label>\n          <input type="text" id="ckh-booking-city" placeholder="Enter city" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n        </div>\n        <div>\n          <label class="text-sm font-medium text-gray-600">Post Code</label>\n          <input type="text" id="ckh-booking-postcode" placeholder="Enter post code" class="w-full border rounded-lg py-2 text-sm outline-none focus:border-blue-500" />\n        </div>\n      </div>\n\n      \x3c!-- Submit --\x3e\n      <button id="ckh-submit-booking" class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition-all mb-4">Book Now</button>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Payment Modal --\x3e\n<div id="ckh-payment-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden">\n  <div class="flex items-center justify-center min-h-screen p-2 md:p-4">\n    <div class="max-w-6xl mx-auto bg-white shadow-lg rounded-2xl overflow-hidden w-full max-h-[98vh] overflow-y-auto">\n      \x3c!-- Header --\x3e\n      <div class="flex justify-between items-center p-4 border-b bg-gray-50 sticky top-0 z-10">\n        <div>\n          <h2 class="text-xl font-bold text-gray-800">Complete Your Payment</h2>\n          <p class="text-sm text-gray-600">Booking Code: <span id="ckh-booking-code-display" class="font-mono font-semibold text-blue-600"></span></p>\n        </div>\n        <button id="ckh-close-payment" class="text-gray-500 hover:text-gray-700 text-2xl font-bold px-2">&times;</button>\n      </div>\n\n      \x3c!-- Payment Iframe Container --\x3e\n      <div class="relative" style="height: 80vh; min-height: 600px;">\n        <iframe id="ckh-payment-iframe" src="about:blank" class="w-full h-full border-0" style="height: 100%; min-height: 600px;" allow="payment" scrolling="yes" frameborder="0" sandbox="allow-same-origin allow-scripts allow-forms allow-top-navigation allow-popups allow-modals"></iframe>\n        <div id="ckh-payment-loading" class="absolute inset-0 bg-white flex items-center justify-center">\n          <div class="text-center">\n            <svg class="animate-spin h-12 w-12 text-blue-500 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>\n            </svg>\n            <p class="text-gray-600">Loading payment gateway...</p>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Footer --\x3e\n      <div class="p-4 border-t bg-gray-50 text-center">\n        <p class="text-xs text-gray-500">Secure payment powered by Midtrans. Your payment information is encrypted and secure.</p>\n      </div>\n    </div>\n  </div>\n</div>\n\n  `;this.container.innerHTML=n}setCSSCustomProperties(){var t,e,n,o;if(!this.container)return;const i=this.container.style;(null==(t=this.options.theme)?void 0:t.primaryColor)&&i.setProperty("--ckh-primary-color",this.options.theme.primaryColor),(null==(e=this.options.theme)?void 0:e.secondaryColor)&&i.setProperty("--ckh-secondary-color",this.options.theme.secondaryColor),(null==(n=this.options.theme)?void 0:n.fontFamily)&&i.setProperty("--ckh-font-family",this.options.theme.fontFamily),(null==(o=this.options.theme)?void 0:o.borderRadius)&&i.setProperty("--ckh-border-radius",this.options.theme.borderRadius)}attachEventListeners(){const t=document.getElementById("ckh-search-btn"),e=document.getElementById("ckh-daterange");if(null==t||t.addEventListener("click",()=>this.handleSearch()),e){const t=new Date,o=new Date;o.setDate(t.getDate()+1);const i=new n({element:e,singleMode:!1,format:"DD/MM/YYYY",autoApply:!1,mobileFriendly:!0,resetButton:!0,numberOfMonths:window.innerWidth<640?1:2,numberOfColumns:window.innerWidth<640?1:2,startDate:t,endDate:o}),s=t.toISOString().split("T")[0],r=o.toISOString().split("T")[0];e.dataset.checkin=s,e.dataset.checkout=r,e.value=`${t.toLocaleDateString("en-GB")} - ${o.toLocaleDateString("en-GB")}`,i.on("selected",(t,n)=>{const o="DD/MM/YYYY",i="YYYY-MM-DD";e.dataset.checkin=t.format(i),e.dataset.checkout=n.format(i),e.value=`${t.format(o)} - ${n.format(o)}`});const a=document.getElementById("ckh-guests-toggle"),l=document.getElementById("ckh-guests-dropdown"),c=document.getElementById("ckh-guests-summary");let d=1,h=0,p=1;const u=()=>{c.textContent=`${d} Adult${d>1?"s":""}, ${h} Child${h>1?"ren":""}, ${p} Room${p>1?"s":""}`};null==a||a.addEventListener("click",()=>{null==l||l.classList.toggle("hidden")}),document.addEventListener("click",t=>{(null==l?void 0:l.contains(t.target))||(null==a?void 0:a.contains(t.target))||null==l||l.classList.add("hidden")});const m=(t,e,n,o,i)=>{const s=document.getElementById(t),r=document.getElementById(e),a=document.getElementById(t.replace("-minus","-count"));null==s||s.addEventListener("click",()=>{const t=Math.max(i,n()-1);o(t),a.textContent=t.toString(),u()}),null==r||r.addEventListener("click",()=>{const t=n()+1;o(t),a.textContent=t.toString(),u()})};m("ckh-adults-minus","ckh-adults-plus",()=>d,t=>d=t,1),m("ckh-children-minus","ckh-children-plus",()=>h,t=>h=t,0),m("ckh-rooms-minus","ckh-rooms-plus",()=>p,t=>p=t,1),u()}const o=document.getElementById("ckh-close-booking"),i=document.getElementById("ckh-submit-booking"),s=document.getElementById("ckh-close-payment");null==o||o.addEventListener("click",()=>this.closeBookingForm()),null==i||i.addEventListener("click",()=>this.submitBooking()),null==s||s.addEventListener("click",()=>this.closePaymentModal()),document.addEventListener("click",t=>{const e=document.getElementById("ckh-booking-modal"),n=document.getElementById("ckh-payment-modal");t.target===e&&this.closeBookingForm(),t.target===n&&this.closePaymentModal()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&(this.closeBookingForm(),this.closePaymentModal())});const r=document.getElementById("ckh-payment-iframe"),a=document.getElementById("ckh-payment-loading");null==r||r.addEventListener("load",function(){"about:blank"!==this.src&&a?a.style.display="none":a&&(a.style.display="flex")}),window.ckhBookingEngine=this}handleSearch(){var t,e,n,o;try{const o=this.getBookingData();(null==(t=this.options.callbacks)?void 0:t.onBookingStart)&&this.options.callbacks.onBookingStart();const i=o.checkIn.toISOString().split("T")[0],s=o.checkOut.toISOString().split("T")[0],r=parseInt((null==(e=document.getElementById("ckh-adults-count"))?void 0:e.textContent)||"1"),a=parseInt((null==(n=document.getElementById("ckh-children-count"))?void 0:n.textContent)||"0");this.requestToBookingEngine(i,s,r,a)}catch(i){console.error("Booking search failed:",i),(null==(o=this.options.callbacks)?void 0:o.onBookingError)&&this.options.callbacks.onBookingError(i)}}performInitialSearch(){var t;try{setTimeout(()=>{var t;this.options.debug&&console.log("Performing initial search with default dates...");const e=new Date,n=new Date;n.setDate(e.getDate()+1);const o=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0];this.requestToBookingEngine(o,i,1,0),(null==(t=this.options.callbacks)?void 0:t.onBookingStart)&&this.options.callbacks.onBookingStart()},100)}catch(e){console.error("Initial search failed:",e),(null==(t=this.options.callbacks)?void 0:t.onBookingError)&&this.options.callbacks.onBookingError(e)}}getBookingData(){var t,e,n,o;const i=document.getElementById("ckh-daterange"),s=parseInt((null==(t=document.getElementById("ckh-adults-count"))?void 0:t.textContent)||"1"),r=parseInt((null==(e=document.getElementById("ckh-children-count"))?void 0:e.textContent)||"0"),a=parseInt((null==(n=document.getElementById("ckh-rooms-count"))?void 0:n.textContent)||"1"),l=(null==(o=document.getElementById("ckh-pets"))?void 0:o.checked)||!1;if(!i.dataset.checkin||!i.dataset.checkout)throw new Error("Please select check-in and check-out dates");this.options.debug&&console.log("Date parsing debug:",{checkinRaw:i.dataset.checkin,checkoutRaw:i.dataset.checkout,inputValue:i.value});const c=new Date(i.dataset.checkin),d=new Date(i.dataset.checkout);if(isNaN(c.getTime())||isNaN(d.getTime()))throw console.error("Date parsing failed:",{checkinRaw:i.dataset.checkin,checkoutRaw:i.dataset.checkout,checkinParsed:c,checkoutParsed:d}),new Error("Invalid date format. Please select valid dates.");return{checkIn:c,checkOut:d,guests:s+r,rooms:a,propertyId:l?"pet-friendly":void 0}}async requestToBookingEngine(t,e,n,o){var i;if(this.options.apiKey)try{this.options.debug&&console.log("Requesting room availability:",{startDate:t,endDate:e,adults:n,children:o});const i=new Headers;i.append("token",this.options.apiKey),i.append("Origin",window.location.origin);const s=new URLSearchParams({StartDate:t,EndDate:e,Adults:n.toString(),Children:o.toString()}),r=`${this.baseUrl}/roomavailability?${s.toString()}`;this.options.debug&&console.log("API Request URL:",r);const a=await fetch(r,{method:"GET",headers:i,redirect:"follow"}),l=await a.json();this.options.debug&&console.log("API Response:",l),this.displayRooms(l)}catch(s){console.error("API Error:",s),this.displayError("Error loading rooms. Please try again."),(null==(i=this.options.callbacks)?void 0:i.onBookingError)&&this.options.callbacks.onBookingError(s)}else this.displayDemoRooms()}displayDemoRooms(){const t={StatusCode:0,Result:[{room_code:"DLX",room_name:"Deluxe Room",room_description:"Spacious deluxe room with city view and modern amenities.",room_max_adult:2,room_max_children:1,room_bed:1,room_size:35,number_of_rooms:5,image_details:[{image_name:"https://picsum.photos/400/300?random=1"}],rate_details:[{rate_code:"STDRRO",rate_name:"Standard Rate - Room Only",rate_description:"Best flexible rate without breakfast",rate_price:85e4,is_close:0},{rate_code:"STDBB",rate_name:"Standard Rate with Breakfast",rate_description:"Includes daily breakfast for 2 persons",rate_price:95e4,is_close:0}]},{room_code:"SUP",room_name:"Superior Room",room_description:"Elegant superior room with premium facilities and garden view.",room_max_adult:3,room_max_children:2,room_bed:2,room_size:42,number_of_rooms:3,image_details:[{image_name:"https://picsum.photos/400/300?random=2"}],rate_details:[{rate_code:"SUPRO",rate_name:"Superior Rate - Room Only",rate_description:"Premium room without meals",rate_price:12e5,is_close:0},{rate_code:"SUPBB",rate_name:"Superior with Breakfast",rate_description:"Includes breakfast and welcome drink",rate_price:135e4,is_close:0}]}]};this.displayRooms(t)}displayRooms(t){const e=document.getElementById("ckh-room-preview");e&&(0===t.StatusCode&&t.Result&&t.Result.length>0?(e.innerHTML="",t.Result.forEach(t=>{const n=this.createRoomCard(t);e.appendChild(n)})):e.innerHTML='<div class="text-center py-8 text-gray-500">No rooms available for the selected dates.</div>')}createRoomCard(t){const e=document.createElement("div"),n=t.image_details&&t.image_details[0]?t.image_details[0].image_name:"https://picsum.photos/400/300",o=(t.rate_details||[]).filter(t=>0===t.is_close),i=o.length>0?o.reduce((t,e)=>e.rate_price<t.rate_price?e:t):null,s=`ckh-room-${t.room_code}-${Math.random().toString(36).substr(2,9)}`;return e.innerHTML=`\n      <div id="${s}" class="flex flex-col mb-3 md:flex-row max-w-4xl mx-auto rounded-2xl shadow-lg overflow-hidden bg-white cursor-pointer transition-all duration-300 hover:shadow-xl hover:-translate-y-1" data-all-rates='${JSON.stringify(o)}' data-current-rate='${i?i.rate_code:""}' data-room-code='${t.room_code}'>\n        \x3c!-- Image --\x3e\n        <img src="${n}" alt="${t.room_name}" class="w-full md:w-72 h-64 md:h-auto object-cover" />\n\n        \x3c!-- Content --\x3e\n        <div class="flex flex-col justify-between p-4 flex-1">\n          \x3c!-- Title --\x3e\n          <h2 class="text-lg md:text-xl font-semibold leading-snug">${t.room_name}</h2>\n\n          \x3c!-- Rating --\x3e\n          <div class="flex items-center gap-2 mt-1">\n            <div class="text-yellow-500 text-sm">★★★★★</div>\n            <span class="text-xs md:text-sm text-gray-500">Available Rooms: ${t.number_of_rooms}</span>\n          </div>\n\n          \x3c!-- Room Details --\x3e\n          <p class="text-xs md:text-sm text-gray-500">Max Adults: ${t.room_max_adult} | Max Children: ${t.room_max_children}</p>\n\n          \x3c!-- Categories --\x3e\n          <div class="flex flex-wrap gap-1 mt-1">\n            <span class="px-2 py-0.5 rounded-full border-solid border-gray-300 text-[11px] md:text-xs">${t.room_bed} Bed${t.room_bed>1?"s":""}</span>\n            <span class="px-2 py-0.5 rounded-full border-solid border-gray-300 text-[11px] md:text-xs">Room Size: ${t.room_size}sqm</span>\n            <span class="px-2 py-0.5 rounded-full border-solid border-gray-300 text-[11px] md:text-xs">${t.room_code}</span>\n          </div>\n\n          \x3c!-- Description --\x3e\n          <p class="text-xs md:text-sm text-gray-600 mt-2 line-clamp-2">${t.room_description||"Comfortable room with excellent amenities."}</p>\n\n          \x3c!-- Rate Selection --\x3e\n          <div class="mt-3">\n            ${i?`\n            \x3c!-- Cheapest Rate Display --\x3e\n            <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">\n              <div>\n                <p class="text-sm font-medium text-gray-800">${i.rate_name}</p>\n                <p class="text-xs text-gray-500">${i.rate_description}</p>\n              </div>\n              <div class="text-right">\n                <p class="text-lg font-bold text-blue-600">IDR ${i.rate_price.toLocaleString()}</p>\n                <p class="text-xs text-gray-500">per night</p>\n              </div>\n            </div>\n\n            \x3c!-- Show All Rates Button --\x3e\n            ${o.length>1?`\n            <button onclick="window.ckhBookingEngine.toggleRates('${s}')" class="w-full mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center justify-center gap-1">\n              <span>View ${o.length-1} more rate${o.length>2?"s":""}</span>\n              <svg class="w-4 h-4 transition-transform" id="${s}-arrow" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />\n              </svg>\n            </button>\n\n            \x3c!-- All Rates Dropdown --\x3e\n            <div id="${s}-rates" class="hidden mt-2 space-y-2">\n              ${o.slice(1).map(t=>`\n                <div class="flex items-center justify-between p-2 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer" onclick="window.ckhBookingEngine.selectRate('${s}', '${t.rate_code}', '${t.rate_name}', ${t.rate_price}, '${t.rate_description}')">\n                  <div>\n                    <p class="text-sm font-medium text-gray-800">${t.rate_name}</p>\n                    <p class="text-xs text-gray-500">${t.rate_description}</p>\n                  </div>\n                  <div class="text-right">\n                    <p class="text-lg font-bold text-gray-800">IDR ${t.rate_price.toLocaleString()}</p>\n                    <p class="text-xs text-gray-500">per night</p>\n                  </div>\n                </div>\n              `).join("")}\n            </div>\n            `:""}\n            `:'\n            <div class="p-2 bg-red-50 rounded-lg">\n              <p class="text-sm text-red-600">No rates available</p>\n            </div>\n            '}\n          </div>\n\n          \x3c!-- Book Now Button --\x3e\n          <div class="mt-3">\n            <button onclick="window.ckhBookingEngine.openBookingForm('${s}', '${t.room_name}', '${i?i.rate_name:""}', '${i?i.rate_price:0}')" class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors" ${i?"":"disabled"}>\n              ${i?"Book Now":"Not Available"}\n            </button>\n          </div>\n        </div>\n      </div>\n    `,e}displayError(t){const e=document.getElementById("ckh-room-preview");e&&(e.innerHTML=`<div class="text-center py-8 text-red-500">${t}</div>`)}toggleRates(t){const e=document.getElementById(t+"-rates"),n=document.getElementById(t+"-arrow");e&&n&&(e.classList.contains("hidden")?(e.classList.remove("hidden"),n.style.transform="rotate(180deg)"):(e.classList.add("hidden"),n.style.transform="rotate(0deg)"))}selectRate(t,e,n,o,i){const s=document.getElementById(t);if(!s)return void console.error("Room card not found for ID:",t);const r=s.querySelector(".bg-gray-50");if(!r)return void console.error("Rate display not found in room card:",t);r.innerHTML=`\n      <div>\n        <p class="text-sm font-medium text-gray-800">${n}</p>\n        <p class="text-xs text-gray-500">${i}</p>\n      </div>\n      <div class="text-right">\n        <p class="text-lg font-bold text-blue-600">IDR ${o.toLocaleString()}</p>\n        <p class="text-xs text-gray-500">per night</p>\n      </div>\n    `;const a=JSON.parse(s.dataset.allRates||"[]").filter(t=>t.rate_code!==e),l=document.getElementById(t+"-rates");l&&(l.innerHTML=a.map(e=>`\n        <div class="flex items-center justify-between p-2 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer" onclick="window.ckhBookingEngine.selectRate('${t}', '${e.rate_code}', '${e.rate_name}', ${e.rate_price}, '${e.rate_description}')">\n          <div>\n            <p class="text-sm font-medium text-gray-800">${e.rate_name}</p>\n            <p class="text-xs text-gray-500">${e.rate_description}</p>\n          </div>\n          <div class="text-right">\n            <p class="text-lg font-bold text-gray-800">IDR ${e.rate_price.toLocaleString()}</p>\n            <p class="text-xs text-gray-500">per night</p>\n          </div>\n        </div>\n      `).join(""));const c=s.querySelector(`[onclick*="toggleRates('${t}')"] span`),d=a.length;d>0&&c&&(c.textContent=`View ${d} more rate${d>1?"s":""}`),s.dataset.currentRate=e,this.toggleRates(t),this.options.debug&&console.log("Selected rate:",{roomId:t,rateCode:e,rateName:n,ratePrice:o,rateDescription:i})}openBookingForm(t,e,n,o){var i,s;const r=(null==(i=document.getElementById("ckh-adults-count"))?void 0:i.textContent)||"1",a=(null==(s=document.getElementById("ckh-children-count"))?void 0:s.textContent)||"0",l=document.getElementById(t);let c=n,d=o,h="",p="";if(l){const t=l.dataset.currentRate,e=JSON.parse(l.dataset.allRates||"[]").find(e=>e.rate_code===t);e&&(c=e.rate_name,d=e.rate_price.toString(),p=e.rate_code),h=l.dataset.roomCode||""}this.currentBookingContext={roomId:t,roomCode:h,rateCode:p,roomName:e,rateName:c,ratePrice:parseFloat(d)};const u=document.getElementById("ckh-daterange"),m=(null==u?void 0:u.dataset.checkin)||"",g=(null==u?void 0:u.dataset.checkout)||"";document.getElementById("ckh-booking-room-type").value=e+" - "+c,document.getElementById("ckh-booking-room-price").value="IDR "+parseInt(d).toLocaleString()+" / night",document.getElementById("ckh-booking-checkin").value=m,document.getElementById("ckh-booking-checkout").value=g,document.getElementById("ckh-booking-adults").value=r,document.getElementById("ckh-booking-children").value=a;const f=document.getElementById("ckh-booking-modal");f&&(f.classList.remove("hidden"),document.body.style.overflow="hidden")}closeBookingForm(){const t=document.getElementById("ckh-booking-modal");t&&(t.classList.add("hidden"),document.body.style.overflow="auto")}async submitBooking(){var t,e;const n={fullName:document.getElementById("ckh-booking-full-name").value,email:document.getElementById("ckh-booking-email").value,phone:document.getElementById("ckh-booking-phone").value,country:document.getElementById("ckh-booking-country").value,state:document.getElementById("ckh-booking-state").value,city:document.getElementById("ckh-booking-city").value,postCode:document.getElementById("ckh-booking-postcode").value,checkIn:document.getElementById("ckh-booking-checkin").value,checkOut:document.getElementById("ckh-booking-checkout").value,adults:parseInt(document.getElementById("ckh-booking-adults").value),children:parseInt(document.getElementById("ckh-booking-children").value),roomCode:this.currentBookingContext.roomCode||"DLX",rateCode:this.currentBookingContext.rateCode||"STDRRO",roomPrice:this.currentBookingContext.ratePrice||0};if(!n.fullName||!n.email||!n.phone)return void alert("Please fill in all required fields (Name, Email, Phone)");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email))return void alert("Please enter a valid email address");if(!this.options.apiKey)return void setTimeout(()=>{this.closeBookingForm(),alert(`Demo Booking Submitted!\n\nRoom: ${this.currentBookingContext.roomName}\nGuest: ${n.fullName}\nEmail: ${n.email}\n\nNote: Add API key for real booking processing.`)},1e3);const o=document.getElementById("ckh-submit-booking"),i=o.textContent;o.textContent="Processing...",o.disabled=!0;try{const e=new Headers;e.append("Content-Type","application/json"),e.append("token",this.options.apiKey);const o={booking_form:{room_code:n.roomCode,rate_code:n.rateCode,room_price:n.roomPrice,arrival_date:n.checkIn,arrival_time:"14:00",departure_date:n.checkOut,guest_detail:{name:n.fullName,phone:n.phone,email:n.email,address:{area:n.city,country:n.country,city:n.city,state:n.state,postCode:n.postCode}},guests:n.adults,rooms:1},payment_info:{redirect_url:this.options.redirectUrl||"https://cakrasoft.net/confirmation-payment",send_url_to_email:!0}};this.options.debug&&console.log("Booking payload:",o);const i=await fetch(`${this.baseUrl}/createbooking`,{method:"POST",headers:e,body:JSON.stringify(o),redirect:"follow"}),s=await i.json();if(this.options.debug&&console.log("Booking API Response:",s),0===s.StatusCode&&s.Result&&s.Result.payment_url&&s.Result.payment_url.redirect_url){const e=s.Result.booking_code,o=s.Result.payment_url.redirect_url;this.options.debug&&console.log("Booking successful:",{bookingCode:e,paymentId:s.Result.payment_id,paymentToken:s.Result.payment_token,paymentUrl:o}),this.closeBookingForm(),this.openPaymentModal(o,e),this.resetBookingForm(),(null==(t=this.options.callbacks)?void 0:t.onBookingComplete)&&this.options.callbacks.onBookingComplete({...n,checkIn:new Date(n.checkIn),checkOut:new Date(n.checkOut),guests:n.adults+n.children,rooms:1,bookingCode:e,paymentUrl:o})}else alert("Booking submission failed. Please try again or contact support."),console.error("Booking failed:",s)}catch(s){console.error("Booking API Error:",s),alert("An error occurred while submitting your booking. Please try again."),(null==(e=this.options.callbacks)?void 0:e.onBookingError)&&this.options.callbacks.onBookingError(s)}finally{o.textContent=i,o.disabled=!1}}resetBookingForm(){document.getElementById("ckh-booking-full-name").value="",document.getElementById("ckh-booking-email").value="",document.getElementById("ckh-booking-phone").value="",document.getElementById("ckh-booking-country").value="",document.getElementById("ckh-booking-state").value="",document.getElementById("ckh-booking-city").value="",document.getElementById("ckh-booking-postcode").value=""}openPaymentModal(t,e){document.getElementById("ckh-payment-iframe").src=t;const n=document.getElementById("ckh-booking-code-display");n&&(n.textContent=e);const o=document.getElementById("ckh-payment-modal");o&&(o.classList.remove("hidden"),document.body.style.overflow="hidden")}closePaymentModal(){const t=document.getElementById("ckh-payment-modal");t&&(t.classList.add("hidden"),document.body.style.overflow="auto"),document.getElementById("ckh-payment-iframe").src="about:blank"}updateOptions(t){this.options={...this.options,...t},this.isInitialized&&(this.renderBookingForm(),this.attachEventListeners())}destroy(){this.container&&(this.container.innerHTML="",this.container.classList.remove("ckh-booking-engine")),this.isInitialized=!1}static getVersion(){return"1.0.0"}}"undefined"!=typeof window&&(window.CkhBookingEngine=o),exports.CkhBookingEngine=o,exports.default=o;
//# sourceMappingURL=ckh-booking-engine.cjs.js.map
